language: generic

services:
  - docker

env:
  global:
    - VERBOSE=1
  matrix:
    - DISTRIBUTIONS=debian.stretch ANSIBLE_VERSION=2.6.5 PART=1/7

script:
  - make lint.diff
  - make test.diff
if: type = pull_request

jobs:
  include:
    - stage:
      script:
        - make split CONFIRM=1
      if: branch = master AND type != pull_request
